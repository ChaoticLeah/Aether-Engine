<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Scripting Basics</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300&display=swap" rel="stylesheet" />
    <script>
        fetch("sidebar.html")
            .then((req) => req.text())
            .then((html) => (document.getElementById("sidebar").innerHTML = html));
    </script>
</head>

<body>
    <div id="sidebar"></div>
    <div id="PageContent">
        <h1>Adding Controller Support</h1>
        <p class="desc">
            This page will teach you how to use the Controller API.<br><br><br>
        </p>

        <h1>The Basics</h1>
        <p class="desc">
            Before you do anything with a controller, you need to first check if any are available. <codeSnippet>
                if(!!gamepads[0]){/*Code Here*/}</codeSnippet> what this does is basically it checks to see if there is
            a controller plugged in. Usually, the user will have to connect the controller and press some button on it for it to detect that it is connected. This code is checking if controller 0 is connected, but the same
            applies to more
            controllers. To see how many controllers there are you can use <codeSnippet>gamepads.length</codeSnippet> There is also a tool under Tools in the game engine that lets you test your controller and even copy some starter code if you click on the button/joystick you want the code for.
        </p>

        <h1>Getting the Joystick Info</h1>
        <p class="desc">
            If you want to get the info of a joystick, first you should check that the controller has a joystick with
            <codeSnippet>if(gamepads[0].totalJoysticks > 0){/*Code Here*/}</codeSnippet> Keep in mind that if it has a
            joystick but you want to access the 2nd joystick and it does not have 2 it will still cause errors. The code for
            getting joystick positioning is shown below:
        </p>
        <div id="scriptHolder">
            <h3>
                script.js
                <button class="copyCode" script="controller/basicjoycon.js">Copy</button>
            </h3>
            <div class="codeField" script="controller/basicjoycon.js"></div>
        </div>

        <h1>Getting the controller button press Info</h1>
        <p class="desc">
            If you want to check if a button is pressed you can do it with <codeSnippet>gamepads[0].getButton(0)
            </codeSnippet> (Returns a value between 0 - 1), Keep in mind you still need to check if the button exists.
            If you want to know what buttons are at what ID, I recommend using the built-in tool under the tools tab in the game engine. Pressing a button will tell you at what index the button is at.
            Some buttons have pressure sensitivity so they just like any other button can return a value from 0 - 1 but it can be in the decimals.
        </p>
        <div id="scriptHolder">
            <h3>
                script.js
                <button class="copyCode" script="controller/basicbuttons.js">Copy</button>
            </h3>
            <div class="codeField" script="controller/basicbuttons.js"></div>
        </div>
        <h1>Vibration</h1>
        <p class="desc">
            Vibration is not super widely supported, but it seems to work in both Chrome and Edge. If you want to make
            the controller vibrate we should first have to check if it can since not all controllers have the hardware
            to vibrate. This is not required since telling it to vibrate will just do nothing if it can but it's a good
            practice. Once we check if it can vibrate then we can run <codeSnippet>gamepads[0].vibrate(vibration
            strength from 0 to 1, vibration time in milliseconds);</codeSnippet>
            Here we can see that it will vibrate when we press button 0.
        </p>
        <div id="scriptHolder">
            <h3>
                Vibrate.js
                <button class="copyCode" script="controller/vibe.js">Copy</button>
            </h3>
            <div class="codeField" script="controller/vibe.js"></div>
        </div>

        <h1>Extra Info</h1>
        <p class="desc"> Some extra data about the controller can be accessed with the code below:<br>
            <codeSnippet>gamepads[0].id</codeSnippet> - Returns the readable id of the controller (eg. Xbox 360 Controller (XInput STANDARD GAMEPAD)) <br>
            <codeSnippet>gamepads[0].mapping</codeSnippet> - Returns the mapping. You probably want to check this and make sure the mapping is "standard", otherwise some weird stuff may happen.

        </p>

        <h1>A Simple Movement System:</h1>

        <div id="scriptHolder">
            <h3>
                playerController.js
                <button class="copyCode" script="controller/movement.js">Copy</button>
            </h3>
            <div class="codeField" script="controller/movement.js"></div>
        </div>

</body>
<script src="./syntaxHighlighter.js"></script>

</html>